DROP TABLE IF EXISTS categoria;
DROP TABLE IF EXISTS user;
DROP TABLE IF EXISTS post;
DROP TABLE IF EXISTS tags;

CREATE TABLE if not exists categoria(
    id INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1, INCREMENT BY 1) PRIMARY KEY not null,
    nombre VARCHAR(60) NOT NULL,
    is_activa boolean default false
);


CREATE TABLE if not exists  user(
    id INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1, INCREMENT BY 1) PRIMARY KEY not null,
    nombre VARCHAR(60) NOT NULL,
    email VARCHAR(100) not null,
    password VARCHAR(80) not null,
    is_activo boolean DEFAULT true
 
);                                                   


CREATE TABLE if not exists post (
    id INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1, INCREMENT BY 1) PRIMARY KEY not null,
    titulo VARCHAR(100) NOT NULL,
    sub_titulo VARCHAR(100) NOT NULL,
    cuerpo clob NOT NULL,
    fecha_creacion TIMESTAMP NOT NULL,
    categoria_id integer NOT NULL,
    user_id integer not null,
    FOREIGN KEY (categoria_id) REFERENCES categoria(id),
    FOREIGN KEY (user_id) REFERENCES user(id)
);

CREATE TABLE if not exists tags(
    post_id integer, 
    tag VARCHAR(255),
     FOREIGN KEY (post_id) REFERENCES post(id)
);


insert into categoria (nombre, is_activa )values ('Literatura', true),('Música',true),('Cine',true),('Deportes',true),  ('Tecnología',true),('Developers',true),('Noticias',true),('Tutoriales',true);
